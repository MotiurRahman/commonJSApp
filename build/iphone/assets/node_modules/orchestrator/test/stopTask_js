

'use strict';

var Orchestrator=require('../');
require('should'),
require('mocha'),

describe('orchestrator',function(){
describe('_stopTask()',function(){

it('should set done = true',function(done){
var orchestrator,task,meta;


task={
name:'test',
fn:function(){}},

meta={
duration:2,
hrDuration:[2,2]},



orchestrator=new Orchestrator,


orchestrator._stopTask(task,meta),


task.done.should.equal(!0),
done();
}),

it('should set running = false',function(done){
var orchestrator,task,meta;


task={
name:'test',
fn:function(){},
running:!0},

meta={
duration:2,
hrDuration:[2,2]},



orchestrator=new Orchestrator,


orchestrator._stopTask(task,meta),


task.running.should.equal(!1),
done();
}),

it('should set task.duration',function(done){
var orchestrator,duration,task,meta;


duration=2,
task={
name:'test',
fn:function(){},
start:new Date},

meta={
duration:duration,
hrDuration:[2,2]},



orchestrator=new Orchestrator,


orchestrator._stopTask(task,meta),


(typeof task.duration).should.equal('number'),
task.duration.should.equal(duration),
done();
}),

it('should die if not passed a task',function(done){

var orchestrator=new Orchestrator,
succeed=!1;


try{
orchestrator._stopTask(),
succeed=!0;
}catch(err){
succeed=!1;
}


succeed.should.equal(!1),
done();
});

});
});